<div class="h-full p-6">
  <div class="max-w-4xl mx-auto space-y-8">
    <form (ngSubmit)="handleResearch($event)" class="space-y-6">
      <div>
        <label for="companyName" class="block text-sm font-medium text-gray-700 mb-1">
          Company Name
        </label>
        <input id="companyName" type="text" [(ngModel)]="companyName" name="companyName"
          class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required
          placeholder="Enter company name" />
      </div>
      <div>
        <label for="prospectName" class="block text-sm font-medium text-gray-700 mb-1">
          Prospect's Name
        </label>
        <input id="prospectName" type="text" [(ngModel)]="prospectName" name="prospectName"
          class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required
          placeholder="Enter prospect's name" />
      </div>

      <div>
        <label for="prospectPosition" class="block text-sm font-medium text-gray-700 mb-1">
          Prospect's Position
        </label>
        <input id="prospectPosition" type="text" [(ngModel)]="prospectPosition" name="prospectPosition"
          class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required
          placeholder="Enter prospect's position" />
      </div>

      <button type="submit" [disabled]="isLoading"
        class="w-full bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
        <div *ngIf="isLoading" class="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>
        <span *ngIf="isLoading">Researching...</span>
        <span *ngIf="!isLoading">Research Company</span>
      </button>
    </form>

    <div *ngIf="scriptData" class="mt-8">
      <h2 class="text-xl font-semibold mb-4">Research Results</h2>
        <mat-expansion-panel [expanded]="false">
          <mat-card>
          <mat-card-content [innerHTML]="scriptData?.research_report | markdownToHtml"></mat-card-content>
        </mat-card>
        </mat-expansion-panel>
    </div>
  </div>
</div>
